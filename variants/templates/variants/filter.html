{% extends 'projectroles/project_base.html' %}
{% load projectroles_common_tags %}
{% load rules %}
{% load crispy_forms_tags %}
{% load static %}
{% load variants_tags %}

{% block navi_sub_project_extend %}
  <li class="breadcrumb-item"><a href="{% url "variants:case-list" project=project.sodar_uuid %}">Cases</a></li>
  {% if query_type == "case" %}
    <li class="breadcrumb-item"><a href="{% url "variants:case-detail" project=project.sodar_uuid case=object.sodar_uuid %}">{{ object.name }}</a></li>
    <li class="breadcrumb-item active">Filter</li>
  {%  else %}
    <li class="breadcrumb-item active">Joint Filtration</li>
  {% endif %}
{% endblock %}

{% block projectroles %}

{% block css %}
  {{ block.super }}
  <style type="text/css">
    .display-exac .detail-gnomad-exomes,
    .display-exac .detail-gnomad-genomes,
    .display-exac .detail-thousand-genomes,
    .display-exac .detail-inhouse,
    .display-gnomad-exomes .detail-exac,
    .display-gnomad-exomes .detail-gnomad-genomes,
    .display-gnomad-exomes .detail-thousand-genomes,
    .display-gnomad-exomes .detail-inhouse,
    .display-gnomad-genomes .detail-exac,
    .display-gnomad-genomes .detail-gnomad-exomes,
    .display-gnomad-genomes .detail-thousand-genomes,
    .display-gnomad-genomes .detail-inhouse,
    .display-thousand-genomes .detail-exac,
    .display-thousand-genomes .detail-gnomad-exomes,
    .display-thousand-genomes .detail-gnomad-genomes,
    .display-thousand-genomes .detail-inhouse,
    .display-inhouse .detail-exac,
    .display-inhouse .detail-gnomad-exomes,
    .display-inhouse .detail-gnomad-genomes,
    .display-inhouse .detail-thousand-genomes {
      display: none;
    }

    .varfish-variant-table th {
      text-align: center;
    }

    .variant-row-positive { background-color: {% get_row_bgcolor "pathogenic" %}; }
    .variant-row-uncertain { background-color: {% get_row_bgcolor "uncertain" %}; }
    .variant-row-negative { background-color: {% get_row_bgcolor "benign" %}; }

    .warning-conflict .hidden { display: none; }

    .compact-form-groups .form-group {
      margin-bottom: 0;
    }
  </style>
{% endblock %}

  <div class="row sodar-pr-content-title pb-2">
    <h2 class="sodar-pr-content-title">
      {% if query_type == "case" %}
        Variant Filter
        <small class="text-muted">{{ object.name }}</small>
      {% else %}
        Joint Filtration
        <small class="text-muted">{{ project.title }}</small>
      {% endif %}
    </h2>
  </div>

  <div class="container-fluid sodar-page-container">
    {% include "variants/_filter_form.html" %}
  </div>

  <!-- table to fill when query finished -->
  <div id="resultsTable" data-loaded="false">
  </div>

{% endblock projectroles %}

{% block javascript %}
  {{ block.super }}
  {% include "variants/script_filter_form.html" %}
{% endblock javascript %}
